(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c0c37f2"],{"07a1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"i-layout-page-header"},[n("PageHeader",{attrs:{title:"菜单权限管理","hidden-breadcrumb":""}})],1),n("Row",{staticClass:"ivu-mt",attrs:{gutter:24}},[n("Col",{staticClass:"ivu-mb",attrs:{xl:10,lg:24,md:24,sm:24,xs:24}},[n("Affix",{attrs:{"offset-top":108}},[n("Card",{staticClass:"ivu-mb",attrs:{bordered:!1,"dis-hover":""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("Dropdown",[n("Button",{attrs:{type:"primary",ghost:""}},[e._v("\n                                添加菜单\n                                "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{nativeOn:{click:function(t){return e.handleOpenCreateHeader(t)}}},[e._v("添加顶栏菜单")]),n("DropdownItem",{attrs:{disabled:!e.menuInfo},nativeOn:{click:function(t){return e.handleOpenCreateSider(t)}}},[e._v("添加子菜单")])],1)],1),n("Button",{directives:[{name:"show",rawName:"v-show",value:!e.toggleExpand,expression:"!toggleExpand"}],staticClass:"ivu-ml",attrs:{type:"primary",ghost:""},on:{click:function(t){return e.handleToggleExpandAll(!0)}}},[n("Icon",{attrs:{type:"md-list"}}),e._v("\n                            全部展开\n                        ")],1),n("Button",{directives:[{name:"show",rawName:"v-show",value:e.toggleExpand,expression:"toggleExpand"}],staticClass:"ivu-ml",attrs:{type:"primary",ghost:""},on:{click:function(t){return e.handleToggleExpandAll(!1)}}},[n("Icon",{attrs:{type:"md-list"}}),e._v("\n                            全部收起\n                        ")],1),n("Button",{directives:[{name:"show",rawName:"v-show",value:e.selectedData.length,expression:"selectedData.length"}],staticClass:"ivu-ml",attrs:{type:"error",ghost:""},on:{click:e.handleDeleteMultiple}},[n("Icon",{attrs:{type:"md-trash"}}),e._v("\n                            批量删除\n                        ")],1)],1),n("div",{style:e.menuListStyle},[n("div",{staticClass:"ivu-p-8"},[e.menuList.length||""!==e.query?n("Input",{attrs:{search:"",placeholder:"输入菜单名称搜索"},on:{"on-change":e.handleSearch},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}):e._e()],1),n("Tree",{attrs:{data:e.menuList,"show-checkbox":"","check-strictly":""},on:{"on-select-change":e.handleSelectNode,"on-check-change":e.handleCheckNode,"on-contextmenu":e.handleContextMenu}},[n("template",{slot:"contextMenu"},[n("DropdownItem",{nativeOn:{click:function(t){return e.handleContextMenuEdit(t)}}},[e._v("编辑")]),n("DropdownItem",{nativeOn:{click:function(t){return e.handleContextMenuNew(t)}}},[e._v("添加子菜单")]),n("DropdownItem",{staticStyle:{color:"#ed4014"},attrs:{divided:""},nativeOn:{click:function(t){return e.handleContextMenuDelete(t)}}},[e._v("删除")])],1)],2)],1)])],1)],1),n("Col",{staticClass:"ivu-mb",attrs:{xl:14,lg:24,md:24,sm:24,xs:24}},[n("Card",{staticClass:"ivu-mb",attrs:{bordered:!1,"dis-hover":""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("Avatar",{directives:[{name:"color",rawName:"v-color",value:"#1890ff",expression:"'#1890ff'"},{name:"bg-color",rawName:"v-bg-color",value:"#e6f7ff",expression:"'#e6f7ff'"}],attrs:{icon:"md-apps",size:"small"}}),n("span",{staticClass:"ivu-pl-8"},[e._v("编辑菜单")]),e.menuInfo?n("span",[e._v("："+e._s(e.menuInfo.title))]):e._e()],1),n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.menuInfo,expression:"!menuInfo"}]},[n("Alert",[e._v("从菜单列表选择一项后，进行编辑")])],1),e.editMenuData&&e.editMenuReady?n("Form",{ref:"infoForm",attrs:{model:e.editMenuData,rules:e.editMenuRules,"label-position":"right","label-width":100,"label-colon":"","hide-required-mark":""}},[n("FormItem",{attrs:{label:"类型"}},[e.editMenuData.name?n("span",[e._v("顶栏菜单")]):n("span",[e._v("侧边栏菜单")])]),n("FormItem",{attrs:{prop:"title",label:"标题"}},[n("Input",{attrs:{placeholder:"请输入标题，必填"},model:{value:e.editMenuData.title,callback:function(t){e.$set(e.editMenuData,"title",t)},expression:"editMenuData.title"}})],1),e.editMenuData.name?e._e():n("FormItem",{attrs:{prop:"subtitle",label:"副标题"}},[n("Input",{attrs:{placeholder:"请输入副标题"},model:{value:e.editMenuData.subtitle,callback:function(t){e.$set(e.editMenuData,"subtitle",t)},expression:"editMenuData.subtitle"}})],1),n("FormItem",{attrs:{prop:"path",label:"路由路径"}},[n("Input",{attrs:{placeholder:"请输入路由路径，必填"},model:{value:e.editMenuData.path,callback:function(t){e.$set(e.editMenuData,"path",t)},expression:"editMenuData.path"}})],1),n("FormItem",{attrs:{prop:"menu_path",label:"菜单路径"}},[n("Input",{attrs:{placeholder:"不填则默认等同于路由路径"},model:{value:e.editMenuData.menu_path,callback:function(t){e.$set(e.editMenuData,"menu_path",t)},expression:"editMenuData.menu_path"}})],1),n("FormItem",{attrs:{prop:"target",label:"打开方式"}},[n("RadioGroup",{model:{value:e.editMenuData.target,callback:function(t){e.$set(e.editMenuData,"target",t)},expression:"editMenuData.target"}},[n("Radio",{attrs:{label:"_self"}},[e._v("当前窗口")]),n("Radio",{attrs:{label:"_blank"}},[e._v("新窗口")])],1)],1),n("FormItem",{attrs:{prop:"is_redirect",label:"是否重定向"}},[n("i-switch",{model:{value:e.editMenuData.is_redirect,callback:function(t){e.$set(e.editMenuData,"is_redirect",t)},expression:"editMenuData.is_redirect"}},[n("Icon",{attrs:{slot:"open",type:"md-checkmark"},slot:"open"}),n("Icon",{attrs:{slot:"close",type:"md-close"},slot:"close"})],1)],1),e.editMenuData.is_redirect?n("FormItem",{attrs:{prop:"redirect_menu_id",label:"重定向地址"}},[n("Select",{attrs:{filterable:"",clearable:"",placeholder:"请选择目标地址"},model:{value:e.editMenuData.redirect_menu_id,callback:function(t){e.$set(e.editMenuData,"redirect_menu_id",t)},expression:"editMenuData.redirect_menu_id"}},e._l(e.menuForSelect,function(t,a){return n("Option",{key:a,attrs:{value:a}},[e._v(e._s(t))])}),1)],1):e._e(),n("FormItem",{attrs:{prop:"component",label:"组件"}},[n("Input",{attrs:{placeholder:"不填则默认为@/page/[path值]"},model:{value:e.editMenuData.component,callback:function(t){e.$set(e.editMenuData,"component",t)},expression:"editMenuData.component"}})],1),e.editMenuData.name?e._e():n("FormItem",{attrs:{prop:"divided"}},[n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                                分割线\n                                "),n("Tooltip",{attrs:{content:"菜单折叠时是否显示分割线"}},[n("Icon",{attrs:{type:"md-help-circle"}})],1)],1),n("i-switch",{model:{value:e.editMenuData.divided,callback:function(t){e.$set(e.editMenuData,"divided",t)},expression:"editMenuData.divided"}},[n("Icon",{attrs:{slot:"open",type:"md-checkmark"},slot:"open"}),n("Icon",{attrs:{slot:"close",type:"md-close"},slot:"close"})],1)],1),e.editMenuData.name?n("FormItem",{attrs:{prop:"name"}},[n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                                顶栏菜单 Name\n                            ")]),n("Input",{attrs:{placeholder:"请输入顶栏菜单 Name"},model:{value:e.editMenuData.name,callback:function(t){e.$set(e.editMenuData,"name",t)},expression:"editMenuData.name"}})],1):e._e(),n("FormItem",{attrs:{prop:"icon",label:"图标"}},[n("i-icon-select",{attrs:{clearable:"",placeholder:"请选择图标",search:"","show-title":""},model:{value:e.editMenuData.icon,callback:function(t){e.$set(e.editMenuData,"icon",t)},expression:"editMenuData.icon"}})],1),n("FormItem",{attrs:{prop:"auth"}},[n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                                菜单权限\n                            ")]),n("Input",{attrs:{placeholder:"权限，逗号分隔"},model:{value:e.editMenuData.auth,callback:function(t){e.$set(e.editMenuData,"auth",t)},expression:"editMenuData.auth"}})],1),n("FormItem",{attrs:{prop:"is_cached",label:"是否缓存"}},[n("i-switch",{model:{value:e.editMenuData.is_cached,callback:function(t){e.$set(e.editMenuData,"is_cached",t)},expression:"editMenuData.is_cached"}},[n("Icon",{attrs:{slot:"open",type:"md-checkmark"},slot:"open"}),n("Icon",{attrs:{slot:"close",type:"md-close"},slot:"close"})],1)],1),e.editMenuData.name?n("FormItem",{attrs:{prop:"hide_sider",label:"隐藏侧边栏"}},[n("i-switch",{model:{value:e.editMenuData.hide_sider,callback:function(t){e.$set(e.editMenuData,"hide_sider",t)},expression:"editMenuData.hide_sider"}},[n("Icon",{attrs:{slot:"open",type:"md-checkmark"},slot:"open"}),n("Icon",{attrs:{slot:"close",type:"md-close"},slot:"close"})],1)],1):e._e(),n("FormItem",{attrs:{prop:"sort"}},[n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    排序数字\n                ")]),n("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"排序数字，从小到大排序"},model:{value:e.editMenuData.sort,callback:function(t){e.$set(e.editMenuData,"sort",e._n(t))},expression:"editMenuData.sort"}})],1),n("FormItem",[n("Button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.handleSubmitUpdate}},[e._v("保存修改")]),n("Button",{staticClass:"ivu-ml",on:{click:e.handleResetUpdate}},[e._v("重置")])],1)],1):e._e()],1)])],1)],1),n("Drawer",{attrs:{styles:e.drawer.styles,"before-close":e.handleCloseEdit,transfer:!1,width:"600"},model:{value:e.drawer.show,callback:function(t){e.$set(e.drawer,"show",t)},expression:"drawer.show"}},[n("div",{staticClass:"ivu-drawer-header-inner",attrs:{slot:"header"},slot:"header"},["header"===e.drawer.type?[e._v("添加顶栏菜单")]:e._e(),"sider"===e.drawer.type?[e._v("\n                添加子菜单："),e.menuInfo?n("span",[e._v(e._s(e.menuInfo.title))]):e._e()]:e._e()],2),e.menuData?n("Form",{ref:"menuForm",attrs:{model:e.menuData,rules:"header"===e.drawer.type?e.headerMenuRules:e.siderMenuRules,"label-position":"right","label-width":100,"label-colon":"","hide-required-mark":""}},[n("FormItem",{attrs:{prop:"title",label:"标题"}},[n("Input",{attrs:{placeholder:"请输入标题，必填"},model:{value:e.menuData.title,callback:function(t){e.$set(e.menuData,"title",t)},expression:"menuData.title"}})],1),"sider"===e.drawer.type?n("FormItem",{attrs:{prop:"subtitle",label:"副标题"}},[n("Input",{attrs:{placeholder:"请输入副标题"},model:{value:e.menuData.subtitle,callback:function(t){e.$set(e.menuData,"subtitle",t)},expression:"menuData.subtitle"}})],1):e._e(),n("FormItem",{attrs:{prop:"path",label:"路由路径"}},[n("Input",{attrs:{placeholder:"请输入路由路径，必填"},model:{value:e.menuData.path,callback:function(t){e.$set(e.menuData,"path",t)},expression:"menuData.path"}})],1),n("FormItem",{attrs:{prop:"menu_path",label:"菜单路径"}},[n("Input",{attrs:{placeholder:"不填则默认等同于路由路径"},model:{value:e.menuData.menu_path,callback:function(t){e.$set(e.menuData,"menu_path",t)},expression:"menuData.menu_path"}})],1),n("FormItem",{attrs:{prop:"target",label:"打开方式"}},[n("RadioGroup",{model:{value:e.menuData.target,callback:function(t){e.$set(e.menuData,"target",t)},expression:"menuData.target"}},[n("Radio",{attrs:{label:"_self"}},[e._v("当前窗口")]),n("Radio",{attrs:{label:"_blank"}},[e._v("新窗口")])],1)],1),n("FormItem",{attrs:{prop:"is_redirect",label:"是否重定向"}},[n("i-switch",{model:{value:e.menuData.is_redirect,callback:function(t){e.$set(e.menuData,"is_redirect",t)},expression:"menuData.is_redirect"}},[n("Icon",{attrs:{slot:"open",type:"md-checkmark"},slot:"open"}),n("Icon",{attrs:{slot:"close",type:"md-close"},slot:"close"})],1)],1),e.menuData.is_redirect?n("FormItem",{attrs:{prop:"redirect_menu_id",label:"重定向地址"}},[n("Select",{attrs:{filterable:"",clearable:"",placeholder:"请选择目标地址"},model:{value:e.menuData.redirect_menu_id,callback:function(t){e.$set(e.menuData,"redirect_menu_id",t)},expression:"menuData.redirect_menu_id"}},e._l(e.menuForSelect,function(t,a){return n("Option",{key:a,attrs:{value:a}},[e._v(e._s(t))])}),1)],1):e._e(),n("FormItem",{attrs:{prop:"component",label:"组件"}},[n("Input",{attrs:{placeholder:"不填则默认为@/page/[path值]"},model:{value:e.menuData.component,callback:function(t){e.$set(e.menuData,"component",t)},expression:"menuData.component"}})],1),"sider"===e.drawer.type?n("FormItem",{attrs:{prop:"divided"}},[n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    分割线\n                    "),n("Tooltip",{attrs:{content:"菜单折叠时是否显示分割线"}},[n("Icon",{attrs:{type:"md-help-circle"}})],1)],1),n("i-switch",{model:{value:e.menuData.divided,callback:function(t){e.$set(e.menuData,"divided",t)},expression:"menuData.divided"}},[n("Icon",{attrs:{slot:"open",type:"md-checkmark"},slot:"open"}),n("Icon",{attrs:{slot:"close",type:"md-close"},slot:"close"})],1)],1):e._e(),"header"===e.drawer.type?n("FormItem",{attrs:{prop:"name"}},[n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    顶栏菜单 Name\n                ")]),n("Input",{attrs:{placeholder:"请输入顶栏菜单 Name"},model:{value:e.menuData.name,callback:function(t){e.$set(e.menuData,"name",t)},expression:"menuData.name"}})],1):e._e(),n("FormItem",{attrs:{prop:"icon",label:"图标"}},[n("i-icon-select",{staticClass:"page-sys-menu-icon-select",attrs:{clearable:"",placeholder:"请选择图标",search:"","show-title":""},model:{value:e.menuData.icon,callback:function(t){e.$set(e.menuData,"icon",t)},expression:"menuData.icon"}})],1),n("FormItem",{attrs:{prop:"auth"}},[n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    菜单权限\n                ")]),n("Input",{attrs:{placeholder:"权限，逗号分隔"},model:{value:e.menuData.auth,callback:function(t){e.$set(e.menuData,"auth",t)},expression:"menuData.auth"}})],1),n("FormItem",{attrs:{prop:"is_cached",label:"是否缓存"}},[n("i-switch",{model:{value:e.menuData.is_cached,callback:function(t){e.$set(e.menuData,"is_cached",t)},expression:"menuData.is_cached"}},[n("Icon",{attrs:{slot:"open",type:"md-checkmark"},slot:"open"}),n("Icon",{attrs:{slot:"close",type:"md-close"},slot:"close"})],1)],1),"header"===e.drawer.type?n("FormItem",{attrs:{prop:"hide_sider",label:"隐藏侧边栏"}},[n("i-switch",{model:{value:e.menuData.hide_sider,callback:function(t){e.$set(e.menuData,"hide_sider",t)},expression:"menuData.hide_sider"}},[n("Icon",{attrs:{slot:"open",type:"md-checkmark"},slot:"open"}),n("Icon",{attrs:{slot:"close",type:"md-close"},slot:"close"})],1)],1):e._e(),n("FormItem",{attrs:{prop:"sort"}},[n("div",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    排序数字\n                ")]),n("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"排序数字，从小到大排序"},model:{value:e.menuData.sort,callback:function(t){e.$set(e.menuData,"sort",e._n(t))},expression:"menuData.sort"}})],1)],1):e._e(),"header"===e.drawer.type?n("div",{staticClass:"page-sys-menu-drawer-footer"},[n("Button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.handleSubmitHeader}},[e._v("提交")])],1):e._e(),"sider"===e.drawer.type?n("div",{staticClass:"page-sys-menu-drawer-footer"},[n("Button",{attrs:{type:"primary",loading:e.submitting},on:{click:e.handleSubmitSider}},[e._v("提交")])],1):e._e()],1)],1)},i=[],r=n("a34a"),s=n.n(r),o=n("2ef0");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,a,i,r,s){try{var o=e[r](s),l=o.value}catch(u){return void n(u)}o.done?t(l):Promise.resolve(l).then(a,i)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function s(e){d(r,a,i,s,o,"next",e)}function o(e){d(r,a,i,s,o,"throw",e)}s(void 0)})}}var h={title:"",path:"",name:"",menu_path:"",icon:"",hide_sider:!1,auth:"",target:"_self",sort:"",is_cached:!1,is_redirect:!1,component:"",redirect_menu_id:0},p={title:"",subtitle:"",menu_path:"",path:"",icon:"",auth:"",target:"_self",divided:!1,header:"",sort:"",is_cached:!1,is_redirect:!1,component:"",redirect_menu_id:0},f={name:"user-menu",data:function(){return{loading:!1,sourceMenuList:[],menuForSelect:[],menuList:[],selectedData:[],toggleExpand:!0,menuInfo:null,contextMenuInfo:null,query:"",drawer:{show:!1,type:"header",styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"}},submitting:!1,menuData:null,menuDataString:"",headerMenuRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],menu_path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],name:[{required:!0,message:"请输入 Name",trigger:"blur"}],icon:[{required:!0,message:"请选择图标",trigger:"change"}],sort:[{required:!0,message:"请输入排序数字",trigger:"change",type:"number"}]},siderMenuRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],menu_path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],header:[{required:!0,message:"请指定对应的顶栏菜单",trigger:"change"}],sort:[{required:!0,message:"请输入排序数字",trigger:"change",type:"number"}]},editMenuRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],menu_path:[{required:!0,message:"请输入菜单路径",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],name:[{required:!0,message:"请输入 Name",trigger:"blur"}]},editMenuData:null,editMenuReady:!0}},computed:{menuListStyle:function(){return{height:document.body.clientHeight-330+"px",overflow:"auto"}}},methods:{handleGetMenuList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0;var n={dict:""};this.$http.query("/Manage/Menu/getAll",n).then(function(){var n=m(s.a.mark(function n(a){return s.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:console.log(a),t&&(e.dict=a.dict),e.sourceMenuList=a.list,e.menuList=Object(o["cloneDeep"])(e.sourceMenuList),e.handleToggleExpandAll(!0),e.loading=!1;case 6:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()).catch(function(e){console.log(e)})},getMenuForSelect:function(){var e=this,t={};this.$http.query("/Manage/Menu/getMenuForSelect",t).then(function(){var t=m(s.a.mark(function t(n){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log(n),e.menuForSelect=n.list;case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){console.log(e)})},handleClearSelect:function(){this.selectedData=[]},handleToggleExpandAll:function(e){this.toggleExpand=e,this.menuList=this.handleToggleExpandNode(this.menuList,e,[])},handleToggleExpandNode:function(e,t,n){var a=this;return e.forEach(function(e){var i={};for(var r in e)"children"!==r&&(i[r]=Object(o["cloneDeep"])(e[r]));i.expand=t,i.contextmenu=!0,e.children&&e.children.length&&(i.children=[]),n.push(i),e.children&&a.handleToggleExpandNode(e.children,t,i.children)}),n},handleSelectNode:function(e){this.menuInfo=e.length?e[0]:null,this.handleInitEditMenuData()},handleCheckNode:function(e){this.selectedData=e},handleContextMenu:function(e){this.contextMenuInfo=e},handleContextMenuEdit:function(){this.menuInfo=this.contextMenuInfo,this.handleInitEditMenuData(),this.menuList=this.handleSelectNodeById(this.menuList,this.menuInfo.id,[])},handleSelectNodeById:function(e,t,n){var a=this;return e.forEach(function(e){var i={};for(var r in e)"children"!==r&&(i[r]=Object(o["cloneDeep"])(e[r]));i.selected=i.id===t,e.children&&e.children.length&&(i.children=[]),n.push(i),e.children&&a.handleSelectNodeById(e.children,t,i.children)}),n},handleSearch:function(){var e=this.query;this.menuInfo=null,this.selectedData=[],this.contextMenuInfo=null,e?this.menuList=this.handleQueryNode(this.sourceMenuList,e,[]):this.handleInitMenuList()},handleInitMenuList:function(){this.menuList=Object(o["cloneDeep"])(this.sourceMenuList),this.handleToggleExpandAll(!0)},handleQueryNode:function(e,t,n){var a=this;return e.forEach(function(e){var i={};for(var r in e)"children"!==r&&(i[r]=Object(o["cloneDeep"])(e[r]));i.title.indexOf(t)>-1&&n.push(i),e.children&&e.children.length&&(i.children=[]),e.children&&a.handleQueryNode(e.children,t,n)}),n},handleOpenCreateHeader:function(){this.menuData=Object(o["cloneDeep"])(h),this.menuDataString=JSON.stringify(this.menuData),this.drawer.type="header",this.drawer.show=!0},handleOpenCreateSider:function(){this.menuInfo&&(this.menuData=Object(o["cloneDeep"])(p),this.menuData.header=this.menuInfo.header,this.menuData.parent_id=this.menuInfo.id,this.menuDataString=JSON.stringify(this.menuData),this.drawer.type="sider",this.drawer.show=!0)},handleContextMenuNew:function(){this.menuInfo=this.contextMenuInfo,this.handleInitEditMenuData(),this.menuList=this.handleSelectNodeById(this.menuList,this.menuInfo.id,[]),this.handleOpenCreateSider()},handleCloseEdit:function(){var e=this,t=Object(o["cloneDeep"])(this.menuData),n=JSON.stringify(t);if(n!==this.menuDataString)return new Promise(function(t){e.$Modal.confirm({title:"关闭确认",content:"您已经编辑了菜单信息，是否直接关闭？",onOk:function(){e.menuData=null,t()}})});this.menuData=null},handleSubmitHeader:function(){var e=this;this.$refs.menuForm.validate(function(t){if(t){if(e.submitting)return;e.submitting=!0;var n=Object(o["cloneDeep"])(e.menuData);n.is_cached?n.is_cached=1:n.is_cached=0,n.divided?n.divided=1:n.divided=0,n.is_redirect?n.is_redirect=1:n.is_redirect=0,e.$http.query("/Manage/Menu/add",e.data).then(function(){var t=m(s.a.mark(function t(n){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.submitting=!1,e.drawer.show=!1,e.menuData=null,e.handleClearSelect(),e.handleGetMenuList();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.submitting=!1,console.log(t)})}})},handleSubmitSider:function(){var e=this;this.$refs.menuForm.validate(function(t){if(t){if(e.submitting)return;e.submitting=!0;var n=Object(o["cloneDeep"])(e.menuData);n.is_cached?n.is_cached=1:n.is_cached=0,n.divided?n.divided=1:n.divided=0,n.is_redirect?n.is_redirect=1:n.is_redirect=0,console.log("data"),console.log(n),e.$http.query("/Manage/Menu/add",n).then(function(){var t=m(s.a.mark(function t(n){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.submitting=!1,e.drawer.show=!1,e.menuData=null,e.handleClearSelect(),e.handleGetMenuList();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.submitting=!1,console.log(t)})}})},handleContextMenuDelete:function(){var e=this;this.submitting||(this.menuInfo=this.contextMenuInfo,this.handleInitEditMenuData(),this.menuList=this.handleSelectNodeById(this.menuList,this.menuInfo.id,[]),this.$Modal.confirm({title:"删除确认",content:"您确认要删除菜单<strong>".concat(this.menuInfo.title,"</strong>吗？"),loading:!0,onOk:function(){var t={menu_id:e.menuInfo.id};e.$http.query("/Manage/Menu/delete",t).then(function(){var t=m(s.a.mark(function t(n){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.$Modal.remove(),e.menuInfo=null,e.editMenuData=null,e.handleClearSelect(),e.handleGetMenuList();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){console.log(e)})}}))},handleDeleteMultiple:function(){var e=this;if(!this.submitting){var t=this.selectedData.map(function(e){return e.id}),n=this.selectedData.map(function(e){return e.title});this.$Modal.confirm({title:"删除确认",content:"您确认要删除菜单 <strong>".concat(n,"</strong> 吗？"),loading:!0,onOk:function(){var n={menu_ids:t};e.$http.query("/Manage/Menu/multipleDelete",n).then(function(){var t=m(s.a.mark(function t(n){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.$Modal.remove(),e.menuInfo=null,e.editMenuData=null,e.handleClearSelect(),e.handleGetMenuList();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.$Modal.remove(),console.log(t)})}})}},handleInitEditMenuData:function(){var e=this,t=null;if(this.menuInfo)for(var n in t=this.menuInfo.name?Object(o["cloneDeep"])(h):Object(o["cloneDeep"])(p),console.log(this.menuInfo),t)n in this.menuInfo&&(t[n]=this.menuInfo[n]);1===t.is_cached?t.is_cached=!0:t.is_cached=!1,1===t.is_redirect?t.is_redirect=!0:t.is_redirect=!1,0!==t.redirect_menu_id&&(t.redirect_menu_id="id_"+t.redirect_menu_id),1===t.divided?t.divided=!0:t.divided=!1,this.editMenuData=t,console.log("editMenuData"),console.log(this.editMenuData),this.editMenuReady=!1,this.$nextTick(function(){e.editMenuReady=!0})},handleSubmitUpdate:function(){var e=this;this.$refs.infoForm.validate(function(t){if(t){if(e.submitting)return;e.submitting=!0;var n=u({menu_id:e.menuInfo.id},e.editMenuData);n.is_cached?n.is_cached=1:n.is_cached=0,n.divided?n.divided=1:n.divided=0,n.is_redirect?n.is_redirect=1:n.is_redirect=0,e.$http.query("/Manage/Menu/update",n).then(function(){var t=m(s.a.mark(function t(n){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.$Message.success("编辑成功"),e.$Modal.remove(),e.submitting=!1,e.handleGetMenuList();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.submitting=!1,e.$Modal.remove(),console.log(t)})}})},handleResetUpdate:function(){this.$refs.infoForm.resetFields()}},mounted:function(){this.handleGetMenuList(),this.getMenuForSelect()}},v=f,g=(n("d2b0"),n("2877")),b=Object(g["a"])(v,a,i,!1,null,null,null);t["default"]=b.exports},"365c":function(e,t,n){},d2b0:function(e,t,n){"use strict";var a=n("365c"),i=n.n(a);i.a}}]);